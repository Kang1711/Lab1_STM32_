/*
 * solfware_timer.c
 *
 *  Created on: Sep 29, 2024
 *      Author: Ngo Truc Linh
 */
#include "solfware_timer.h"
int timerCounter[10];
int timerFlag[10];

const uint8_t segment_p[10] = {
    0b00111111, // 0
    0b00000110, // 1
    0b01011011, // 2
    0b01001111, // 3
    0b01100110, // 4
    0b01101101, // 5
    0b01111101, // 6
    0b00000111, // 7
    0b01111111, // 8
    0b01101111  // 9
};
void display7SEG5(int num) { //Ex5
    if (num < 0 || num > 9) return;
    uint8_t p = segment_p[num];

    //Check tá»«ng bit trong segment_p
    HAL_GPIO_WritePin(Seg1_GPIO_Port, Seg1_Pin, (p & 0x01) ? RESET : SET);
    HAL_GPIO_WritePin(Seg2_GPIO_Port, Seg2_Pin, (p & 0x02) ? RESET : SET);
    HAL_GPIO_WritePin(Seg3_GPIO_Port, Seg3_Pin, (p & 0x04) ? RESET : SET);
    HAL_GPIO_WritePin(Seg4_GPIO_Port, Seg4_Pin, (p & 0x08) ? RESET : SET);
    HAL_GPIO_WritePin(Seg5_GPIO_Port, Seg5_Pin, (p & 0x10) ? RESET : SET);
    HAL_GPIO_WritePin(Seg6_GPIO_Port, Seg6_Pin, (p & 0x20) ? RESET : SET);
    HAL_GPIO_WritePin(Seg7_GPIO_Port, Seg7_Pin, (p & 0x40) ? RESET : SET);
}
void setTimer1(int duration){
	timer1_counter=duration;
	timer1_flag=0;
}

void timerRun(){
	if (timer1_counter>0){
		timer1_counter--;
		if(timer1_counter<=0){
			timer1_flag=1;
		}
	}
}

